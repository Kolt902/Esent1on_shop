# Скрипты для работы с Esention Shop

В этой директории содержатся утилитарные скрипты для работы с проектом.

## Экспорт базы данных

Скрипт `export_db.js` создает резервную копию вашей базы данных. Скрипт выполняет:
1. Экспорт структуры базы данных (таблицы, связи, индексы)
2. Экспорт данных всех таблиц
3. Сохранение результата в директории `scripts/db_backup` с временной меткой

### Как использовать

```bash
# Через npm-скрипт (если скрипты добавлены в package.json)
npm run db:export

# Или напрямую
node scripts/export_db.js
```

Скрипт запросит подтверждение перед началом экспорта.

## Импорт базы данных

Скрипт `import_db.js` восстанавливает базу данных из ранее созданной резервной копии. Скрипт выполняет:
1. Отображение списка доступных резервных копий
2. Запрос на выбор файла для импорта
3. Восстановление базы данных из выбранного файла

### Как использовать

```bash
# Через npm-скрипт (если скрипты добавлены в package.json)
npm run db:import

# Или напрямую
node scripts/import_db.js
```

## Важные замечания

- Скрипты требуют, чтобы переменная окружения `DATABASE_URL` была правильно настроена.
- При импорте база данных будет перезаписана! Существующие данные будут удалены и заменены данными из бэкапа.
- Директория `scripts/db_backup` добавлена в `.gitignore`, чтобы предотвратить случайное размещение резервных копий в репозитории.

## Использование для переноса между окружениями

Эти скрипты особенно полезны при переносе данных между различными окружениями, например:
1. Из Replit в Railway
2. Из dev в prod
3. При миграции между разными экземплярами баз данных

### Типичный процесс переноса:

1. В исходном окружении:
   ```bash
   DATABASE_URL="source_db_url" node scripts/export_db.js
   ```

2. Скопируйте файл резервной копии на целевую машину/окружение

3. В целевом окружении:
   ```bash
   DATABASE_URL="target_db_url" node scripts/import_db.js
   ```

## Расширение скриптов

Скрипты можно расширить для поддержки дополнительных функций, таких как:
- Выборочный экспорт/импорт определенных таблиц
- Сжатие резервных копий
- Автоматическая загрузка в облачное хранилище
- Планирование автоматических резервных копий